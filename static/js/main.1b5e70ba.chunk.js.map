{"version":3,"sources":["constants/initialState.js","core/ui/actions.js","core/ui/reducers.js","core/api/actions.js","core/data/reducers.js","core/webSockets/actions.js","core/players/reducers.js","core/reducers.js","core/api/sagas.js","core/sagas.js","core/ui/sagas.js","core/store.js","hooks/useWebSockets.js","components/App.jsx","index.jsx"],"names":["initialState","data","players","ui","actions","SET_WS","setWs","payload","type","reducer","state","action","ws","MOVE_DOWN","MOVE_DOWN_FAILURE","MOVE_DOWN_SUCCESS","MOVE_LEFT","MOVE_LEFT_FAILURE","MOVE_LEFT_SUCCESS","MOVE_RIGHT","MOVE_RIGHT_FAILURE","MOVE_RIGHT_SUCCESS","MOVE_UP","MOVE_UP_FAILURE","MOVE_UP_SUCCESS","SEND","SEND_FAILURE","SEND_SUCCESS","moveDown","client","request","send","moveDownFailure","moveDownSuccess","moveLeft","moveLeftFailure","moveLeftSuccess","moveRight","moveRightFailure","moveRightSuccess","moveUp","moveUpFailure","moveUpSuccess","sendFailure","sendSuccess","console","log","JSON","parse","message","messages","ONCLOSE","ONERROR","ONMESSAGE","ONOPEN","onclose","onerror","onmessage","onopen","webSocketsActions","appReducer","combineReducers","call","stringify","takeEvery","apiActions","sagas","combinedSagas","apiSagas","all","sagaMiddleware","createSagaMiddleware","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","run","coreSagas","useWebSockets","useState","setClient","W3CWebSocket","useStyles","createUseStyles","boxSizing","body","background","color","fontFamily","fontSize","margin","overflowY","padding","active","column","alignItems","borderBottom","borderRight","display","flex","flexDirection","justifyContent","grid","outline","borderLeft","borderTop","height","maxHeight","width","row","App","classes","dispatch","useDispatch","useSelector","Array","fill","rs","hasActivePlayer","x","y","Object","keys","find","id","position","tabIndex","role","className","onKeyUp","e","key","map","classnames","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1b5e70ba.chunk.js","sourcesContent":["export const initialState = {\n  data: {},\n  players: {},\n  ui: {},\n};\n\nexport default initialState;\n","const actions = {\n  SET_WS: 'UI_SET_WS',\n  setWs: (data) => ({\n    payload: data,\n    type: actions.SET_WS,\n  }),\n};\n\nexport default actions;\n","import actions from './actions';\n\nconst reducer = (state = {}, action) => {\n  switch (action.type) {\n    case actions.SET_WS:\n      return {\n        ...state,\n        ws: action.payload,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","const actions = {\n  MOVE_DOWN: 'API_MOVE_DOWN',\n  MOVE_DOWN_FAILURE: 'API_MOVE_DOWN_FAILURE',\n  MOVE_DOWN_SUCCESS: 'API_MOVE_DOWN_SUCCESS',\n\n  MOVE_LEFT: 'API_MOVE_LEFT',\n  MOVE_LEFT_FAILURE: 'API_MOVE_LEFT_FAILURE',\n  MOVE_LEFT_SUCCESS: 'API_MOVE_LEFT_SUCCESS',\n\n  MOVE_RIGHT: 'API_MOVE_RIGHT',\n  MOVE_RIGHT_FAILURE: 'API_MOVE_RIGHT_FAILURE',\n  MOVE_RIGHT_SUCCESS: 'API_MOVE_RIGHT_SUCCESS',\n\n  MOVE_UP: 'API_MOVE_UP',\n  MOVE_UP_FAILURE: 'API_MOVE_UP_FAILURE',\n  MOVE_UP_SUCCESS: 'API_MOVE_UP_SUCCESS',\n\n  SEND: 'API_SEND',\n  SEND_FAILURE: 'API_SEND_FAILURE',\n  SEND_SUCCESS: 'API_SEND_SUCCESS',\n\n  moveDown: (client) => ({\n    payload: {\n      actions: ['moveDown'],\n    },\n    request: (data) => client.send(data),\n    type: actions.MOVE_DOWN,\n  }),\n  moveDownFailure: (payload) => ({\n    payload,\n    type: actions.MOVE_DOWN_FAILURE,\n  }),\n  moveDownSuccess: (payload) => ({\n    payload,\n    type: actions.MOVE_DOWN_SUCCESS,\n  }),\n\n  moveLeft: (client) => ({\n    payload: {\n      actions: ['moveLeft'],\n    },\n    request: (data) => client.send(data),\n    type: actions.MOVE_LEFT,\n  }),\n  moveLeftFailure: (payload) => ({\n    payload,\n    type: actions.MOVE_LEFT_FAILURE,\n  }),\n  moveLeftSuccess: (payload) => ({\n    payload,\n    type: actions.MOVE_LEFT_SUCCESS,\n  }),\n\n  moveRight: (client) => ({\n    payload: {\n      actions: ['moveRight'],\n    },\n    request: (data) => client.send(data),\n    type: actions.MOVE_RIGHT,\n  }),\n  moveRightFailure: (payload) => ({\n    payload,\n    type: actions.MOVE_RIGHT_FAILURE,\n  }),\n  moveRightSuccess: (payload) => ({\n    payload,\n    type: actions.MOVE_RIGHT_SUCCESS,\n  }),\n\n  moveUp: (client) => ({\n    payload: {\n      actions: ['moveUp'],\n    },\n    request: (data) => client.send(data),\n    type: actions.MOVE_UP,\n  }),\n  moveUpFailure: (payload) => ({\n    payload,\n    type: actions.MOVE_UP_FAILURE,\n  }),\n  moveUpSuccess: (payload) => ({\n    payload,\n    type: actions.MOVE_UP_SUCCESS,\n  }),\n\n  sendFailure: (payload) => ({\n    payload,\n    type: actions.SEND_FAILURE,\n  }),\n  sendSuccess: (payload) => ({\n    payload,\n    type: actions.SEND_SUCCESS,\n  }),\n};\n\nexport default actions;\n","import actions from 'core/api/actions';\n\nconst reducer = (state = {}, action) => {\n  switch (action.type) {\n    case actions.SEND_SUCCESS:\n      console.log(JSON.parse(action.payload.data).message);\n      return {\n        ...state,\n        messages: [JSON.parse(action.payload.data).message, ...state.messages],\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","const actions = {\n  ONCLOSE: 'WEB_SOCKETS_ONCLOSE',\n  ONERROR: 'WEB_SOCKETS_ONERROR',\n  ONMESSAGE: 'WEB_SOCKETS_ONMESSAGE',\n  ONOPEN: 'WEB_SOCKETS_ONOPEN',\n\n  onclose: (payload) => ({\n    payload,\n    type: actions.ONCLOSE,\n  }),\n  onerror: (payload) => ({\n    payload,\n    type: actions.ONERROR,\n  }),\n  onmessage: (payload) => ({\n    payload,\n    type: actions.ONMESSAGE,\n  }),\n  onopen: (payload) => ({\n    payload,\n    type: actions.ONOPEN,\n  }),\n};\n\nexport default actions;\n","import webSocketsActions from 'core/webSockets/actions';\n\nconst reducer = (state = {}, action) => {\n  switch (action.type) {\n    case webSocketsActions.ONMESSAGE:\n      console.log(action.payload);\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import { combineReducers } from 'redux';\nimport ui from 'core/ui/reducers';\nimport data from 'core/data/reducers';\nimport players from 'core/players/reducers';\n\nconst appReducer = combineReducers({\n  data,\n  players,\n  ui,\n});\n\nexport default (state, action) => {\n  return appReducer(state, action);\n};\n","import { takeEvery, call } from 'redux-saga/effects';\nimport apiActions from './actions';\n\nfunction* send({ payload, request }) {\n  yield call(request, JSON.stringify(payload));\n}\n\nexport default [\n  takeEvery(apiActions.SEND, send),\n  takeEvery(apiActions.MOVE_UP, send),\n  takeEvery(apiActions.MOVE_DOWN, send),\n  takeEvery(apiActions.MOVE_LEFT, send),\n  takeEvery(apiActions.MOVE_RIGHT, send),\n];\n","import { all } from 'redux-saga/effects';\nimport uiSagas from 'core/ui/sagas';\nimport apiSagas from 'core/api/sagas';\n\nconst combinedSagas = [...uiSagas, ...apiSagas];\n\nexport default function* sagas() {\n  yield all(combinedSagas);\n}\n","// import { takeEvery, put } from 'redux-saga/effects';\n// import uiActions from './actions';\n\nexport default [];\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { initialState } from 'constants/initialState';\n\nimport coreReducers from './reducers';\nimport coreSagas from './sagas';\n\nconst sagaMiddleware = createSagaMiddleware();\n\n// eslint-disable-next-line\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  coreReducers,\n  initialState,\n  composeEnhancers(applyMiddleware(sagaMiddleware)),\n);\n\nsagaMiddleware.run(coreSagas);\n\nexport default store;\n","import { useState } from 'react';\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\n\nconst useWebSockets = () => {\n  const [client, setClient] = useState();\n\n  if (!client) {\n    // ws://rathe001-test-app.herokuapp.com\n    // ws://localhost:3001\n    setClient(new W3CWebSocket('ws://rathe001-test-app.herokuapp.com'));\n  }\n\n  return client;\n};\n\nexport default useWebSockets;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport classnames from 'classnames';\nimport { createUseStyles } from 'react-jss';\nimport useWebSockets from 'hooks/useWebSockets';\nimport apiActions from 'core/api/actions';\nimport webSocketsActions from 'core/webSockets/actions';\n\nconst colors = ['red', 'green', 'blue', 'pink', 'orange', 'white'];\n\nconst useStyles = createUseStyles({\n  '@global': {\n    '*': {\n      boxSizing: 'border-box',\n    },\n    body: {\n      background: 'black',\n      color: 'green',\n      fontFamily: 'Verdana',\n      fontSize: 4,\n      margin: 0,\n      overflowY: 'hidden',\n      padding: 0,\n    },\n  },\n  active: {\n    background: '#fff',\n  },\n  column: {\n    alignItems: 'center',\n    borderBottom: '2px solid #111',\n    borderRight: '2px solid #111',\n    display: 'flex',\n    flex: '1 1 auto',\n    flexDirection: 'column',\n    justifyContent: 'center',\n  },\n  grid: {\n    '&:focus': {\n      outline: 'none',\n    },\n    borderLeft: '2px solid #111',\n    borderTop: '2px solid #111',\n    display: 'flex',\n    flexDirection: 'column-reverse',\n    height: '100vh',\n    maxHeight: '100%',\n    padding: 0,\n    width: '100vw',\n  },\n  row: {\n    alignItems: 'stretch',\n    display: 'flex',\n    flex: '1 1 auto',\n    flexDirection: 'row',\n    width: '100%',\n  },\n});\n\nconst App = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const players = useSelector((state) => state.players);\n\n  const grid = [...Array(40)].fill([...Array(80)]);\n\n  const client = useWebSockets();\n\n  if (client) {\n    client.onerror = (rs) => {\n      console.log('Connection Error');\n      // dispatch(webSocketsActions.onerror(rs));\n    };\n    client.onclose = (rs) => {\n      console.log('WebSocket Client Disconnected');\n      // dispatch(webSocketsActions.onclose(rs));\n    };\n    client.onopen = (rs) => {\n      console.log('WebSocket Client Connected');\n      // dispatch(webSocketsActions.onopen(rs));\n    };\n    client.onmessage = (rs) => {\n      const data = JSON.parse(rs.data);\n      dispatch(webSocketsActions.onmessage(data));\n    };\n  }\n\n  const hasActivePlayer = (x, y) => {\n    return Object.keys(players).find(\n      (id) => players[id].position.x === x && players[id].position.y === y,\n    );\n  };\n\n  return (\n    <div\n      tabIndex=\"0\"\n      role=\"textbox\"\n      className={classes.grid}\n      onKeyUp={(e) => {\n        if (e.key === 'ArrowUp') {\n          dispatch(apiActions.moveUp(client));\n        } else if (e.key === 'ArrowDown') {\n          dispatch(apiActions.moveDown(client));\n        } else if (e.key === 'ArrowLeft') {\n          dispatch(apiActions.moveLeft(client));\n        } else if (e.key === 'ArrowRight') {\n          dispatch(apiActions.moveRight(client));\n        }\n      }}\n    >\n      {grid.map((row, y) => (\n        <div className={classes.row} key={y}>\n          {row.map((column, x) => (\n            <div\n              className={classnames(classes.column, {\n                [classes.active]: hasActivePlayer(x, y),\n              })}\n              key={x}\n            />\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from 'core/store';\nimport App from 'components/App';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}