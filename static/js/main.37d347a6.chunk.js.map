{"version":3,"sources":["constants/initialState.js","core/ui/actions.js","core/ui/reducers.js","core/webSockets/actions.js","core/data/reducers.js","core/reducers.js","core/api/actions.js","core/api/sagas.js","core/sagas.js","core/ui/sagas.js","core/store.js","components/Input.jsx","components/App.jsx","index.jsx"],"names":["initialState","data","messages","ui","actions","SET_WS","setWs","payload","type","reducer","state","action","ws","ONCLOSE","ONERROR","ONMESSAGE","ONOPEN","onclose","onerror","onmessage","onopen","console","log","JSON","parse","message","appReducer","combineReducers","SEND_INPUT","SEND_INPUT_FAILURE","SEND_INPUT_SUCCESS","sendInput","request","window","websocketclient","send","sendInputFailure","sendInputSuccess","sendMessage","call","stringify","rs","put","apiActions","takeEvery","sagas","combinedSagas","apiSagas","all","sagaMiddleware","createSagaMiddleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","run","coreSagas","useStyles","createUseStyles","Input","background","border","bottom","color","fontFamily","fontSize","padding","position","width","useState","input","setInput","classes","dispatch","useDispatch","className","onChange","e","target","value","onKeyPress","key","placeholder","connectToServer","W3CWebSocket","boxSizing","body","margin","overflowY","p","wrap","display","flexDirection","height","maxHeight","App","useSelector","webSocketsActions","map","msg","i","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.37d347a6.chunk.js","sourcesContent":["export const initialState = {\n  data: {\n    messages: [],\n  },\n  ui: {},\n};\n\nexport default initialState;\n","const actions = {\n  SET_WS: 'UI_SET_WS',\n  setWs: (data) => ({\n    payload: data,\n    type: actions.SET_WS,\n  }),\n};\n\nexport default actions;\n","import actions from './actions';\n\nconst reducer = (state = {}, action) => {\n  switch (action.type) {\n    case actions.SET_WS:\n      return {\n        ...state,\n        ws: action.payload,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","const actions = {\n  ONCLOSE: 'WEB_SOCKETS_ONCLOSE',\n  ONERROR: 'WEB_SOCKETS_ONERROR',\n  ONMESSAGE: 'WEB_SOCKETS_ONMESSAGE',\n  ONOPEN: 'WEB_SOCKETS_ONOPEN',\n\n  onclose: (payload) => ({\n    payload,\n    type: actions.ONCLOSE,\n  }),\n  onerror: (payload) => ({\n    payload,\n    type: actions.ONERROR,\n  }),\n  onmessage: (payload) => ({\n    payload,\n    type: actions.ONMESSAGE,\n  }),\n  onopen: (payload) => ({\n    payload,\n    type: actions.ONOPEN,\n  }),\n};\n\nexport default actions;\n","import actions from 'core/webSockets/actions';\n\nconst reducer = (state = {}, action) => {\n  switch (action.type) {\n    case actions.ONMESSAGE:\n      console.log(JSON.parse(action.payload.data).message);\n      return {\n        ...state,\n        messages: [JSON.parse(action.payload.data).message, ...state.messages],\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import { combineReducers } from 'redux';\nimport ui from 'core/ui/reducers';\nimport data from 'core/data/reducers';\n\nconst appReducer = combineReducers({\n  data,\n  ui,\n});\n\nexport default (state, action) => {\n  return appReducer(state, action);\n};\n","const actions = {\n  SEND_INPUT: 'API_SEND_INPUT',\n  SEND_INPUT_FAILURE: 'API_SEND_INPUT_FAILURE',\n  SEND_INPUT_SUCCESS: 'API_SEND_INPUT_SUCCESS',\n  sendInput: ({ message }) => ({\n    payload: {\n      message,\n    },\n    request: (data) => window.websocketclient.send(data),\n    type: actions.SEND_INPUT,\n  }),\n  sendInputFailure: (payload) => ({\n    payload,\n    type: actions.SEND_INPUT_FAILURE,\n  }),\n  sendInputSuccess: (payload) => ({\n    payload,\n    type: actions.SEND_INPUT_SUCCESS,\n  }),\n};\n\nexport default actions;\n","import { takeEvery, call, put } from 'redux-saga/effects';\nimport apiActions from './actions';\n\nfunction* sendMessage({ payload, request }) {\n  try {\n    const rs = yield call(request, JSON.stringify(payload));\n    yield put(apiActions.sendInputSuccess(rs));\n  } catch (e) {\n    yield put(apiActions.sendInputFailure(e));\n  }\n}\n\nexport default [takeEvery(apiActions.SEND_INPUT, sendMessage)];\n","import { all } from 'redux-saga/effects';\nimport uiSagas from 'core/ui/sagas';\nimport apiSagas from 'core/api/sagas';\n\nconst combinedSagas = [...uiSagas, ...apiSagas];\n\nexport default function* sagas() {\n  yield all(combinedSagas);\n}\n","// import { takeEvery, put } from 'redux-saga/effects';\n// import uiActions from './actions';\n\nexport default [];\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { initialState } from 'constants/initialState';\n\nimport coreReducers from './reducers';\nimport coreSagas from './sagas';\n\nconst sagaMiddleware = createSagaMiddleware();\n\n// eslint-disable-next-line\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  coreReducers,\n  initialState,\n  composeEnhancers(applyMiddleware(sagaMiddleware)),\n);\n\nsagaMiddleware.run(coreSagas);\n\nexport default store;\n","import React, { useState } from 'react';\nimport { createUseStyles } from 'react-jss';\nimport { useDispatch } from 'react-redux';\nimport apiActions from 'core/api/actions';\n\nconst useStyles = createUseStyles({\n  Input: {\n    background: '#111111',\n    border: '1px solid #666666',\n    bottom: 0,\n    color: 'green',\n    fontFamily: 'Verdana',\n    fontSize: 16,\n    padding: 10,\n    position: 'fixed',\n    width: '100%',\n  },\n});\n\nconst Input = () => {\n  const [input, setInput] = useState('');\n  const classes = useStyles();\n  const dispatch = useDispatch();\n\n  const send = (message) =>\n    dispatch(\n      apiActions.sendInput({\n        message,\n      }),\n    );\n\n  return (\n    <input\n      className={classes.Input}\n      type=\"text\"\n      onChange={(e) => setInput(e.target.value)}\n      onKeyPress={(e) => {\n        if (e.key === 'Enter') {\n          send(e.target.value);\n          setInput('');\n        }\n      }}\n      value={input}\n      placeholder=\"Enter message\"\n    />\n  );\n};\n\nexport default Input;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { createUseStyles } from 'react-jss';\nimport Input from 'components/Input';\nimport { w3cwebsocket as W3CWebSocket } from 'websocket';\nimport webSocketsActions from 'core/webSockets/actions';\n\nconst connectToServer = () => {\n  window.websocketclient = new W3CWebSocket('ws://rathe001-test-app.herokuapp.com');\n};\n\nconst useStyles = createUseStyles({\n  '@global': {\n    '*': {\n      boxSizing: 'border-box',\n    },\n    body: {\n      background: 'black',\n      color: 'green',\n      fontFamily: 'Verdana',\n      fontSize: 16,\n      margin: 0,\n      overflowY: 'hidden',\n      padding: 0,\n    },\n    p: {\n      margin: [0, 0, 5, 0],\n      padding: 0,\n    },\n  },\n  wrap: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100vh',\n    maxHeight: '100%',\n    padding: 10,\n    width: '100vw',\n  },\n});\n\nconst App = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { messages } = useSelector((state) => state.data);\n\n  if (!window.websocketclient) {\n    connectToServer();\n\n    window.websocketclient.onerror = (rs) => {\n      console.log('Connection Error');\n      dispatch(webSocketsActions.onerror(rs));\n    };\n    window.websocketclient.onclose = (rs) => {\n      console.log('WebSocket Client Disconnected');\n      dispatch(webSocketsActions.onclose(rs));\n      connectToServer();\n    };\n    window.websocketclient.onopen = (rs) => {\n      console.log('WebSocket Client Connected');\n      dispatch(webSocketsActions.onopen(rs));\n    };\n    window.websocketclient.onmessage = (rs) => {\n      console.log(rs);\n      dispatch(webSocketsActions.onmessage(rs));\n    };\n  }\n\n  return (\n    <>\n      <div className={classes.wrap}>\n        {messages.map((msg, i) => (\n          <p key={i}>{msg}</p>\n        ))}\n      </div>\n      <Input />\n    </>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from 'core/store';\nimport App from 'components/App';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}